{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _form = require('antd/lib/form');\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _tabs = require('antd/lib/tabs');\n\nvar _tabs2 = _interopRequireDefault(_tabs);\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _LoginItem = require('./LoginItem');\n\nvar _LoginItem2 = _interopRequireDefault(_LoginItem);\n\nvar _LoginTab = require('./LoginTab');\n\nvar _LoginTab2 = _interopRequireDefault(_LoginTab);\n\nvar _LoginSubmit = require('./LoginSubmit');\n\nvar _LoginSubmit2 = _interopRequireDefault(_LoginSubmit);\n\nvar _loginContext = require('./loginContext');\n\nvar _loginContext2 = _interopRequireDefault(_loginContext);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar styles = {\n  'login': 'antd-pro-login-login',\n  'ant-tabs': 'antd-pro-login-ant-tabs',\n  'ant-tabs-bar': 'antd-pro-login-ant-tabs-bar',\n  'ant-form-item': 'antd-pro-login-ant-form-item',\n  'getCaptcha': 'antd-pro-login-getCaptcha',\n  'icon': 'antd-pro-login-icon',\n  'other': 'antd-pro-login-other',\n  'register': 'antd-pro-login-register',\n  'prefixIcon': 'antd-pro-login-prefixIcon',\n  'submit': 'antd-pro-login-submit'\n};\nvar Login = (_temp = _class = function (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    _classCallCheck(this, Login);\n\n    var _this = _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).call(this, props));\n\n    _this.onSwitch = function (type) {\n      _this.setState({\n        type: type\n      });\n\n      var onTabChange = _this.props.onTabChange;\n      onTabChange(type);\n    };\n\n    _this.getContext = function () {\n      var tabs = _this.state.tabs;\n      var form = _this.props.form;\n      return {\n        tabUtil: {\n          addTab: function addTab(id) {\n            _this.setState({\n              tabs: [].concat(_toConsumableArray(tabs), [id])\n            });\n          },\n          removeTab: function removeTab(id) {\n            _this.setState({\n              tabs: tabs.filter(function (currentId) {\n                return currentId !== id;\n              })\n            });\n          }\n        },\n        form: form,\n        updateActive: function updateActive(activeItem) {\n          var _this$state = _this.state,\n              type = _this$state.type,\n              active = _this$state.active;\n\n          if (active[type]) {\n            active[type].push(activeItem);\n          } else {\n            active[type] = [activeItem];\n          }\n\n          _this.setState({\n            active: active\n          });\n        }\n      };\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var _this$state2 = _this.state,\n          active = _this$state2.active,\n          type = _this$state2.type;\n      var _this$props = _this.props,\n          form = _this$props.form,\n          onSubmit = _this$props.onSubmit;\n      var activeFileds = active[type];\n      form.validateFields(activeFileds, {\n        force: true\n      }, function (err, values) {\n        onSubmit(err, values);\n      });\n    };\n\n    _this.state = {\n      type: props.defaultActiveKey,\n      tabs: [],\n      active: {}\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          children = _props.children;\n      var _state = this.state,\n          type = _state.type,\n          tabs = _state.tabs;\n      var TabChildren = [];\n      var otherChildren = [];\n\n      _react2.default.Children.forEach(children, function (item) {\n        if (!item) {\n          return;\n        } // eslint-disable-next-line\n\n\n        if (item.type.typeName === 'LoginTab') {\n          TabChildren.push(item);\n        } else {\n          otherChildren.push(item);\n        }\n      });\n\n      return _react2.default.createElement(_loginContext2.default.Provider, {\n        value: this.getContext()\n      }, _react2.default.createElement('div', {\n        className: (0, _classnames2.default)(className, styles.login)\n      }, _react2.default.createElement(_form2.default, {\n        onSubmit: this.handleSubmit\n      }, tabs.length ? _react2.default.createElement(_react2.default.Fragment, null, _react2.default.createElement(_tabs2.default, {\n        animated: false,\n        className: styles.tabs,\n        activeKey: type,\n        onChange: this.onSwitch\n      }, TabChildren), otherChildren) : children)));\n    }\n  }]);\n\n  return Login;\n}(_react.Component), _class.propTypes = {\n  className: _propTypes2.default.string,\n  defaultActiveKey: _propTypes2.default.string,\n  onTabChange: _propTypes2.default.func,\n  onSubmit: _propTypes2.default.func\n}, _class.defaultProps = {\n  className: '',\n  defaultActiveKey: '',\n  onTabChange: function onTabChange() {},\n  onSubmit: function onSubmit() {}\n}, _temp);\nLogin.Tab = _LoginTab2.default;\nLogin.Submit = _LoginSubmit2.default;\nObject.keys(_LoginItem2.default).forEach(function (item) {\n  Login[item] = _LoginItem2.default[item];\n});\nexports.default = _form2.default.create()(Login);\nmodule.exports = exports.default;","map":null,"metadata":{},"sourceType":"script"}