{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/TramitesAdmin.js\";\nimport React, { Component } from 'react';\nimport { Icon, Button, Modal } from 'antd';\nimport DataTable from \"../components/DataTable\";\nimport API from \"../tools/API\";\nimport moment from 'moment';\n\nvar TramitesAdmin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TramitesAdmin, _Component);\n\n  function TramitesAdmin(props) {\n    var _this;\n\n    _classCallCheck(this, TramitesAdmin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TramitesAdmin).call(this, props));\n\n    _this.refreshData = function () {\n      _this.setState({\n        loading: true\n      });\n\n      API.restCall({\n        service: 'get_tramites/',\n        success: function success(response) {\n          console.log(response);\n\n          _this.setState({\n            data: response,\n            loading: false\n          });\n        },\n        error: function error(response) {\n          _this.setState({\n            loading: false\n          });\n        }\n      });\n    };\n\n    _this.deleteFiles = function (rows) {\n      _this.setState({\n        loading: true\n      });\n\n      API.call('eliminar_tramites/', {\n        tramites: JSON.stringify(rows)\n      }, function (response) {\n        _this.setState({\n          loading: false\n        });\n\n        _this.refreshData();\n      }, function (response) {\n        _this.setState({\n          loading: false\n        });\n      });\n    };\n\n    _this.state = {\n      data: [],\n      data2: [],\n      loading: true,\n      record: {},\n      cols: []\n    };\n    return _this;\n  }\n\n  _createClass(TramitesAdmin, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.refreshData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"solution\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }), \" Tr\\xE1mites\"), React.createElement(DataTable, {\n        loading: this.state.loading,\n        data: this.state.data,\n        deleteFunc: this.deleteFiles,\n        rowSelection: true,\n        columns: [{\n          title: 'Matrícula',\n          key: 'matricula'\n        }, {\n          title: '# De ticket',\n          key: 'numero_ticket',\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 62\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              onClick: function onClick() {\n                localStorage.setItem(\"matAlumno\", record.matricula);\n                API.redirectTo(\"/tramite/\" + record.id);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 63\n              },\n              __self: this\n            }, \" #\", text));\n          }\n        }, {\n          title: 'Fecha de inicio',\n          key: 'fecha_inicio',\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 72\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 73\n              },\n              __self: this\n            }, moment(text).format('DD-MMM-YYYY')));\n          }\n        }, {\n          title: 'Fecha de última actualización',\n          key: 'fecha_ultima_actualizacion',\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 81\n              },\n              __self: this\n            }, moment(text).format('DD-MMM-YYYY')));\n          }\n        }, {\n          title: 'Paso actual',\n          key: 'numero_paso_actual'\n        }, {\n          title: 'Paso actual',\n          key: 'proceso__nombre'\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        width: 1300,\n        title: this.state.record.nombre,\n        visible: this.state.visible,\n        onCancel: function onCancel() {\n          _this2.setState({\n            visible: false\n          });\n        },\n        footer: [React.createElement(Button, {\n          key: \"back\",\n          onClick: function onClick() {\n            _this2.setState({\n              visible: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"Cancelar\"), React.createElement(Button, {\n          key: \"submit\",\n          type: \"primary\",\n          onClick: function onClick() {\n            _this2.setState({\n              visible: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"OK\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, this.state.record.fecha)), React.createElement(DataTable, {\n        columns: this.state.cols,\n        data: this.state.data2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return TramitesAdmin;\n}(Component);\n\nexport { TramitesAdmin as default };","map":{"version":3,"sources":["/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/TramitesAdmin.js"],"names":["React","Component","Icon","Button","Modal","DataTable","API","moment","TramitesAdmin","props","refreshData","setState","loading","restCall","service","success","response","console","log","data","error","deleteFiles","rows","call","tramites","JSON","stringify","state","data2","record","cols","title","key","render","text","textAlign","localStorage","setItem","matricula","redirectTo","id","format","nombre","visible","fecha"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n    Icon, Button, Modal\n} from 'antd';\nimport DataTable from \"../components/DataTable\";\nimport API from \"../tools/API\";\nimport moment from 'moment';\n\nexport default class TramitesAdmin extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data:[],\n            data2:[],\n            loading:true,\n            record:{},\n            cols:[],\n        }\n    }\n\n    refreshData = () => {\n        this.setState({loading:true});\n        API.restCall({\n            service:'get_tramites/',\n            success:(response) => {\n                console.log(response);\n                this.setState({data: response, loading:false});\n            },\n            error:(response) => {\n                this.setState({loading:false});\n            }\n        })\n    };\n\n    deleteFiles = (rows) => {\n        this.setState({loading:true});\n        API.call('eliminar_tramites/',{tramites:JSON.stringify(rows)}, (response) => {\n            this.setState({ loading:false});\n            this.refreshData();\n        }, (response) => {this.setState({ loading:false})});\n    };\n\n    componentWillMount() {\n        this.refreshData();\n    }\n\n    render() {\n        return (\n            <div>\n                <h1><Icon type=\"solution\" /> Trámites</h1>\n                <DataTable loading={this.state.loading} data={this.state.data}\n                           deleteFunc={this.deleteFiles} rowSelection={true}\n                columns={[{\n                    title: 'Matrícula',\n                    key: 'matricula',\n\n                }, {\n                    title: '# De ticket',\n                    key: 'numero_ticket',\n                    render: (text, record) => (\n                        <div style={{textAlign:'center'}}>\n                            <a onClick={() => {localStorage.setItem(\"matAlumno\", record.matricula);\n                            API.redirectTo(\"/tramite/\"+record.id)}}> #{text}</a>\n                        </div>\n                    )\n\n                }, {\n                    title: 'Fecha de inicio',\n                    key: 'fecha_inicio',\n                    render: (text, record) => (\n                        <div style={{textAlign:'center'}}>\n                            <div>{moment(text).format('DD-MMM-YYYY')}</div>\n                        </div>\n                    )\n                }, {\n                    title: 'Fecha de última actualización',\n                    key: 'fecha_ultima_actualizacion',\n                    render: (text, record) => (\n                        <div style={{textAlign:'center'}}>\n                            <div>{moment(text).format('DD-MMM-YYYY')}</div>\n                        </div>\n                    )\n                },{\n                    title: 'Paso actual',\n                    key: 'numero_paso_actual',\n                },{\n                    title: 'Paso actual',\n                    key: 'proceso__nombre',\n                }\n                ]}/>\n                <Modal\n                    width={1300}\n                    title={this.state.record.nombre}\n                    visible={this.state.visible}\n                    onCancel={() => {this.setState({visible:false})}}\n                    footer={[\n                        <Button key=\"back\" onClick={() => {this.setState({visible:false})}}>Cancelar</Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={() => {this.setState({visible:false})}}>\n                            OK\n                        </Button>,]}>\n                    <div style={{textAlign:'right'}}><h3>{this.state.record.fecha}</h3></div>\n                    <DataTable columns={this.state.cols} data={this.state.data2}/>\n                </Modal>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}