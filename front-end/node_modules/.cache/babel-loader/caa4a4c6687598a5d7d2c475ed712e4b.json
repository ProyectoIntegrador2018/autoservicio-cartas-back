{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/Tramite.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { Icon, Divider, Steps, Row, Col, Spin, Statistic } from 'antd';\nimport API from \"../tools/API\";\nimport MediaQuery from 'react-responsive';\n\nvar Tramite =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Tramite, _Component);\n\n  function Tramite(props) {\n    var _this;\n\n    _classCallCheck(this, Tramite);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Tramite).call(this, props));\n\n    _this.getPasos = function (id) {\n      _this.setState({\n        loading: true\n      });\n\n      API.restCall({\n        service: 'get_pasos_tramites/',\n        params: {\n          id: id\n        },\n        method: 'post',\n        success: function success(response) {\n          _this.setState({\n            pasos: response,\n            loading: false,\n            status: _this.state.n_paso == response.length ? \"Terminado\" : _this.state.n_paso == 0 ? \"Iniciado\" : \"En proceso\"\n          });\n        },\n        error: function error(response) {\n          _this.setState({\n            loading: false\n          });\n        }\n      });\n    };\n\n    _this.refreshData = function () {\n      _this.setState({\n        loading: true\n      });\n\n      {\n        /*Método que muestra los datos de los trámites\n        Muestra los pasos de los trámites, el nombre del proceso,\n        la fecha de inicio, la fecha de última actualización,\n        los días transcurridos*/\n      }\n      API.restCall({\n        service: 'get_datos_tramite_alumno/' + _this.props.id,\n        success: function success(response) {\n          _this.setState({\n            step: response[0].paso_actual,\n            proceso: response[0].proceso__nombre,\n            ticket: response[0].numero_ticket,\n            fecha1: response[0].fecha_inicio,\n            fecha2: response[0].fecha_ultima_actualizacion,\n            n_paso: response[0].numero_paso_actual\n          });\n\n          _this.getPasos(response[0].proceso_id);\n        },\n        error: function error(response) {\n          _this.setState({\n            loading: false\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      id: props.id || -1,\n      loading: false,\n      columns: [],\n      disabled: true,\n      step: 0,\n      ultima_actualizacion: \"\",\n      fecha_apertura: \"\",\n      pasos: [],\n      proceso: \"\",\n      ticket: \"\",\n      fecha1: \"\",\n      fecha2: \"\",\n      status: \"\",\n      n_paso: 1\n    };\n    return _this;\n  }\n\n  _createClass(Tramite, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      // only update chart if the data has changed\n      if (prevProps.id !== this.props.id) {\n        this.setState({\n          id: this.props.id\n        });\n        this.refreshData();\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.refreshData();\n    }\n  }, {\n    key: \"render\",\n\n    /*\n    refreshData = () => {\n        this.setState({loading:true});\n        API.restCall({\n            service:'get_datos_tramite_alumno/' + this.props.id ,\n            success:(response) => {\n                 this.setState({step: response[0].paso_actual, proceso: response[0].proceso__nombre,\n                ticket:response[0].numero_ticket, fecha1: response[0].fecha_inicio, fecha2:response[0].fecha_ultima_actualizacion,\n                n_paso:response[0].numero_paso_actual });\n                this.getPasos(response[0].proceso_id)\n                },\n            error:(response) => {\n                this.setState({loading:false});\n            }\n        })\n    };\n    */\n\n    /*Layout de los trámites*/\n    value: function render() {\n      return React.createElement(Spin, {\n        spinning: this.state.loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: {\n          float: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, localStorage.getItem(\"esAdmin\") ? React.createElement(Statistic, {\n        title: \"Matr\\xEDcula\",\n        groupSeparator: \"\",\n        value: (localStorage.getItem(\"matAlumno\") || \" \").toLocaleUpperCase(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }) : \"\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, localStorage.getItem(\"esAdmin\") ? \"Trámite del alumno\" : \"Mi trámite\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(Row, {\n        style: {\n          float: 'right'\n        },\n        gutter: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Statistic, {\n        title: \"D\\xEDas transcurridos\",\n        groupSeparator: \"\",\n        value: moment().diff(moment(this.state.fecha1), 'days'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Statistic, {\n        title: \"Estatus\",\n        groupSeparator: \"\",\n        value: this.state.status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }))), React.createElement(\"h2\", {\n        style: {\n          marginBottom: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.state.proceso), React.createElement(MediaQuery, {\n        query: \"(min-device-width: 1224px)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Steps, {\n        labelPlacement: 'vertical',\n        current: this.state.n_paso,\n        style: {\n          marginBottom: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, this.state.pasos.map(function (value) {\n        return React.createElement(Steps.Step, {\n          title: value.nombre_mostrar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n      }))), React.createElement(MediaQuery, {\n        query: \"(max-device-width: 1223px)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Steps, {\n        direction: \"vertical\",\n        labelPlacement: 'vertical',\n        current: this.state.n_paso,\n        style: {\n          marginBottom: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, this.state.pasos.map(function (value) {\n        return React.createElement(Steps.Step, {\n          title: value.nombre_mostrar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n      }))), this.state.n_paso == this.state.pasos.length && !localStorage.getItem(\"esAdmin\") ? React.createElement(Row, {\n        style: {\n          textAlign: 'center'\n        },\n        gutter: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"https://forms.gle/GzcmC4f9cmFKS2ee9\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Eval\\xFAa los tr\\xE1mites escolares\"))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(Row, {\n        gutter: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Statistic, {\n        title: \"Ticket\",\n        groupSeparator: \"\",\n        value: this.state.ticket,\n        prefix: '#',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 8,\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Statistic, {\n        title: \"Fecha de inicio\",\n        value: moment.utc(this.state.fecha1).format(\"DD/MM/YYYY\"),\n        prefix: React.createElement(Icon, {\n          type: \"calendar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Statistic, {\n        title: \"Fecha de \\xFAltima actualizaci\\xF3n\",\n        value: moment.utc(this.state.fecha2).format(\"DD/MM/YYYY\"),\n        prefix: React.createElement(Icon, {\n          type: \"calendar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Tramite;\n}(Component);\n\nexport { Tramite as default };","map":{"version":3,"sources":["/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/Tramite.js"],"names":["React","Component","moment","Icon","Divider","Steps","Row","Col","Spin","Statistic","API","MediaQuery","Tramite","props","getPasos","id","setState","loading","restCall","service","params","method","success","response","pasos","status","state","n_paso","length","error","refreshData","step","paso_actual","proceso","proceso__nombre","ticket","numero_ticket","fecha1","fecha_inicio","fecha2","fecha_ultima_actualizacion","numero_paso_actual","proceso_id","columns","disabled","ultima_actualizacion","fecha_apertura","prevProps","prevState","float","localStorage","getItem","toLocaleUpperCase","diff","marginBottom","map","value","nombre_mostrar","textAlign","utc","format"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment'\nimport {\n    Icon, Divider, Steps,  Row, Col, Spin, Statistic\n} from 'antd';\nimport API from \"../tools/API\";\nimport MediaQuery from 'react-responsive';\n\nexport default class Tramite extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:props.id || -1,\n            loading:false,\n            columns: [],\n            disabled: true,\n            step:0,\n            ultima_actualizacion:\"\",\n            fecha_apertura:\"\",\n            pasos:[],\n            proceso:\"\",\n            ticket:\"\",\n            fecha1:\"\",\n            fecha2:\"\",\n            status:\"\",\n            n_paso: 1\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        // only update chart if the data has changed\n        if (prevProps.id !== this.props.id ) {\n            this.setState({id:this.props.id})\n            this.refreshData();\n        }\n    }\n\n    componentWillMount() {\n        this.refreshData();\n    }\n\n    getPasos = (id) => {\n        this.setState({loading:true});\n        API.restCall({\n            service:'get_pasos_tramites/',\n            params:{id:id},\n            method:'post',\n            success:(response) => {\n                this.setState({ pasos: response, loading:false, status:this.state.n_paso==response.length ?\n                        \"Terminado\" : this.state.n_paso == 0 ? \"Iniciado\":\"En proceso\" });\n            },\n            error:(response) => {\n                this.setState({loading:false});\n            }\n        })\n    }\n\n    refreshData = () => {\n        this.setState({loading:true});\n        {/*Método que muestra los datos de los trámites\n        Muestra los pasos de los trámites, el nombre del proceso,\n        la fecha de inicio, la fecha de última actualización,\n        los días transcurridos*/}\n        API.restCall({\n            service:'get_datos_tramite_alumno/' + this.props.id ,\n            success:(response) => {\n                this.setState({step: response[0].paso_actual, proceso: response[0].proceso__nombre,\n                ticket:response[0].numero_ticket, fecha1: response[0].fecha_inicio, fecha2:response[0].fecha_ultima_actualizacion,\n                n_paso:response[0].numero_paso_actual });\n                this.getPasos(response[0].proceso_id)\n                },\n            error:(response) => {\n                this.setState({loading:false});\n            }\n        })\n    };\n\n    /*\n    refreshData = () => {\n        this.setState({loading:true});\n        API.restCall({\n            service:'get_datos_tramite_alumno/' + this.props.id ,\n            success:(response) => {\n\n                this.setState({step: response[0].paso_actual, proceso: response[0].proceso__nombre,\n                ticket:response[0].numero_ticket, fecha1: response[0].fecha_inicio, fecha2:response[0].fecha_ultima_actualizacion,\n                n_paso:response[0].numero_paso_actual });\n                this.getPasos(response[0].proceso_id)\n                },\n            error:(response) => {\n                this.setState({loading:false});\n            }\n        })\n    };\n    */\n\n    /*Layout de los trámites*/\n\n    render() {\n        return (\n            <Spin spinning={this.state.loading}><div>\n                <h2 style={{float:'right'}}>{ localStorage.getItem(\"esAdmin\") ? \n                    <Statistic title=\"Matrícula\" groupSeparator={\"\"} value={(localStorage.getItem(\"matAlumno\") || \" \").toLocaleUpperCase()} />\n                 : \"\" }</h2>\n                <h1>{ localStorage.getItem(\"esAdmin\") ? \"Trámite del alumno\" : \"Mi trámite\" }</h1>\n                <Divider/>\n                <Row style={{float:'right'}} gutter={8}>\n                    <Col span={12}>\n                        <Statistic title=\"Días transcurridos\" groupSeparator={\"\"} value={moment().diff(moment(this.state.fecha1),'days')} />\n                    </Col>\n                    <Col span={12}>\n                        <Statistic title=\"Estatus\" groupSeparator={\"\"} value={this.state.status} />\n                    </Col>\n                </Row>\n                <h2 style={{marginBottom:50}}>{this.state.proceso}</h2>\n                <MediaQuery query=\"(min-device-width: 1224px)\">\n                    <Steps labelPlacement={'vertical'} current={this.state.n_paso} style={{marginBottom:50}}>\n                        {\n                            this.state.pasos.map(value => {\n                                return (<Steps.Step title={value.nombre_mostrar} />)\n                            })\n                        }\n                    </Steps>\n                </MediaQuery>\n                <MediaQuery query=\"(max-device-width: 1223px)\">\n                    <Steps direction=\"vertical\" labelPlacement={'vertical'} current={this.state.n_paso} style={{marginBottom:50}}>\n                        {\n                            this.state.pasos.map(value => {\n                                return (<Steps.Step title={value.nombre_mostrar} />)\n                            })\n                        }\n                    </Steps>\n                </MediaQuery>\n                {this.state.n_paso==this.state.pasos.length  && !localStorage.getItem(\"esAdmin\")  ?  <Row style={{textAlign:'center', }} gutter={8}>\n                        <h2><a href={\"https://forms.gle/GzcmC4f9cmFKS2ee9\"} target={\"_blank\"}>Evalúa los trámites escolares</a></h2>\n                </Row> : <div></div>}\n                <Row gutter={8}>\n                    <Col span={12}>\n                        <Statistic title=\"Ticket\" groupSeparator={\"\"} value={this.state.ticket} prefix={'#'} />\n                    </Col>\n                    <Col span={12}>\n                        <Row gutter={8} style={{textAlign:'center'}}>\n                            <Col span={12}>\n                                <Statistic title=\"Fecha de inicio\" value={moment.utc(this.state.fecha1).format(\"DD/MM/YYYY\")} prefix={<Icon type=\"calendar\" />} />\n                            </Col>\n                            <Col span={12}>\n                                <Statistic title=\"Fecha de última actualización\" value={moment.utc(this.state.fecha2).format(\"DD/MM/YYYY\")} prefix={<Icon type=\"calendar\" />}/>\n                            </Col>\n                        </Row>\n                    </Col>\n                </Row>\n            </div>\n            </Spin>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}