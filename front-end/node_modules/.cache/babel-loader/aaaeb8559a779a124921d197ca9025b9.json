{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/Documentos.js\";\nimport React, { Component } from 'react';\nimport { Icon, Button, Modal } from 'antd';\nimport DataTable from \"../components/DataTable\";\nimport { Link } from 'react-router-dom';\nimport API from \"../tools/API\";\nimport moment from 'moment';\n\nvar Documentos =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Documentos, _Component);\n\n  function Documentos(props) {\n    var _this;\n\n    _classCallCheck(this, Documentos);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Documentos).call(this, props));\n\n    _this.refreshData = function () {\n      _this.setState({\n        loading: true\n      });\n\n      API.call('documentos/', [], function (response) {\n        _this.setState({\n          data: response,\n          loading: false\n        });\n      });\n    };\n\n    _this.deleteFiles = function (rows) {\n      _this.setState({\n        loading: true\n      });\n\n      API.call('eliminar-documentos/', {\n        documentos: JSON.stringify(rows)\n      }, function (response) {\n        _this.setState({\n          loading: false\n        });\n\n        _this.refreshData();\n      }, function (response) {\n        _this.setState({\n          loading: false\n        });\n      });\n    };\n\n    _this.showContent = function (record) {\n      var data = JSON.parse(record.contenido_subido);\n\n      _this.setState({\n        cols: data.cols,\n        data2: data.data,\n        visible: true,\n        record: record\n      });\n    };\n\n    _this.state = {\n      data: [],\n      data2: [],\n      loading: true,\n      record: {},\n      cols: []\n    };\n    return _this;\n  }\n\n  _createClass(Documentos, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.refreshData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/documentos/subir',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          float: 'right'\n        },\n        type: \"secondary\",\n        icon: \"upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \"Subir documento de proceso\")), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"file-excel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }), \" Documentos\"), React.createElement(DataTable, {\n        loading: this.state.loading,\n        data: this.state.data,\n        deleteFunc: this.deleteFiles,\n        rowSelection: true,\n        columns: [{\n          title: 'Nombre del documento',\n          key: 'nombre'\n        }, {\n          title: 'Usuario',\n          key: 'email'\n        }, {\n          title: 'Fecha',\n          key: 'fecha',\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 67\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68\n              },\n              __self: this\n            }, moment(text).format('DD-MMM-YYYY')));\n          }\n        }, {\n          title: 'Contenido subido',\n          key: 'id',\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              style: {\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 75\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              onClick: function onClick() {\n                return _this2.showContent(record);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 76\n              },\n              __self: this\n            }, React.createElement(Icon, {\n              type: 'table',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 76\n              },\n              __self: this\n            }), \" Ver contenido\"));\n          }\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        width: 1300,\n        title: this.state.record.nombre,\n        visible: this.state.visible,\n        onCancel: function onCancel() {\n          _this2.setState({\n            visible: false\n          });\n        },\n        footer: [React.createElement(Button, {\n          key: \"back\",\n          onClick: function onClick() {\n            _this2.setState({\n              visible: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"Cancelar\"), React.createElement(Button, {\n          key: \"submit\",\n          type: \"primary\",\n          onClick: function onClick() {\n            _this2.setState({\n              visible: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"OK\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, moment(this.state.record.fecha).format('DD-MMM-YYYY'))), React.createElement(DataTable, {\n        columns: this.state.cols,\n        data: this.state.data2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Documentos;\n}(Component);\n\nexport { Documentos as default };","map":{"version":3,"sources":["/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/Documentos.js"],"names":["React","Component","Icon","Button","Modal","DataTable","Link","API","moment","Documentos","props","refreshData","setState","loading","call","response","data","deleteFiles","rows","documentos","JSON","stringify","showContent","record","parse","contenido_subido","cols","data2","visible","state","float","title","key","render","text","textAlign","format","nombre","fecha"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n    Icon, Button, Modal\n} from 'antd';\nimport DataTable from \"../components/DataTable\";\nimport { Link } from 'react-router-dom'\nimport API from \"../tools/API\";\nimport moment from 'moment';\n\nexport default class Documentos extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data:[],\n            data2:[],\n            loading:true,\n            record:{},\n            cols:[],\n        }\n    }\n\n    refreshData = () => {\n        this.setState({loading:true});\n        API.call('documentos/',[], (response) => {\n            this.setState({data: response, loading:false});\n        });\n    };\n\n    deleteFiles = (rows) => {\n        this.setState({loading:true});\n        API.call('eliminar-documentos/',{documentos:JSON.stringify(rows)}, (response) => {\n            this.setState({ loading:false});\n            this.refreshData();\n        }, (response) => {this.setState({ loading:false})});\n    };\n\n    componentWillMount() {\n        this.refreshData();\n    }\n\n    showContent = (record) => {\n        let data = JSON.parse(record.contenido_subido);\n        this.setState({cols:data.cols, data2:data.data, visible:true,record:record});\n    };\n\n    render() {\n        return (\n            <div>\n                <Link to={'/documentos/subir'}><Button style={{float:'right'}} type=\"secondary\" icon=\"upload\">\n                    Subir documento de proceso</Button></Link>\n                <h1><Icon type=\"file-excel\" /> Documentos</h1>\n                <DataTable loading={this.state.loading} data={this.state.data}\n                           deleteFunc={this.deleteFiles} rowSelection={true}\n                columns={[{\n                    title: 'Nombre del documento',\n                    key: 'nombre',\n\n                }, {\n                    title: 'Usuario',\n                    key: 'email',\n\n                }, {\n                    title: 'Fecha',\n                    key: 'fecha',\n                    render: (text, record) => (\n                        <div style={{textAlign:'center'}}>\n                            <div>{moment(text).format('DD-MMM-YYYY')}</div>\n                        </div>\n                    ),\n                }, {\n                    title: 'Contenido subido',\n                    key: 'id',\n                    render: (text, record) => (\n                        <div style={{textAlign:'center'}}>\n                            <a onClick={() => this.showContent(record)}><Icon type={'table'}/> Ver contenido</a>\n                        </div>\n                    ),\n                }]}/>\n\n                <Modal\n                    width={1300}\n                    title={this.state.record.nombre}\n                    visible={this.state.visible}\n                    onCancel={() => {this.setState({visible:false})}}\n                    footer={[\n                        <Button key=\"back\" onClick={() => {this.setState({visible:false})}}>Cancelar</Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={() => {this.setState({visible:false})}}>\n                            OK\n                        </Button>,]}>\n                    <div style={{textAlign:'right'}}><h3>{moment(this.state.record.fecha).format('DD-MMM-YYYY')}</h3></div>\n                    <DataTable columns={this.state.cols} data={this.state.data2}/>\n                </Modal>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}