{"ast":null,"code":"import _defineProperty from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/DashboardView.js\";\nimport React, { Component } from 'react';\nimport { Button, Collapse, Spin } from 'antd';\nimport Charts from 'ant-design-pro/lib/Charts';\nimport { Pie } from 'ant-design-pro/lib/Charts';\nimport moment from 'moment';\nimport '../App.css';\nimport \"antd/dist/antd.css\";\nimport API from \"../tools/API\";\nimport Select from \"antd/lib/select\";\nvar Panel = Collapse.Panel;\n\nfunction callback(key) {} //console.log(key);\n// Transferencia otro campus    QUITAR\n\n\nvar salesPieData3 = [{\n  x: 'Director de programa autoriza',\n  y: 100\n}, {\n  x: 'Escolar origen autoriza',\n  y: 220\n}, {\n  x: 'Tesorería',\n  y: 40\n}, {\n  x: 'Escolar destino autoriza',\n  y: 40\n}, {\n  x: 'Trámite terminado',\n  y: 40\n}]; // Baja de materias    QUITAR\n\nvar salesPieData4 = [{\n  x: 'Escolar inicia trámite',\n  y: 40\n}, {\n  x: 'Becas autoriza',\n  y: 30\n}, {\n  x: 'DC autoriza',\n  y: 10\n}, {\n  x: 'Trámite terminado',\n  y: 5\n}];\n\nvar DashboardView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DashboardView, _Component);\n\n  function DashboardView(props) {\n    var _this;\n\n    _classCallCheck(this, DashboardView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DashboardView).call(this, props));\n\n    _this.getData = function (key, item) {\n      _this.setState(_defineProperty({}, \"data_\" + key + \"spinner\", true));\n\n      API.restCall({\n        service: 'get_pasos_proceso/' + item.id,\n        method: 'get',\n        success: function success(response) {\n          console.log(response);\n          var pasos = response;\n          API.restCall({\n            service: 'get_tramites_resumen/' + item.id + \"/\" + (_this.state[\"data_\" + key + \"month\"] != undefined ? _this.state[\"data_\" + key + \"month\"] : 0) + \"/\" + (_this.state[\"data_\" + key + \"status\"] != undefined ? _this.state[\"data_\" + key + \"status\"] : -1),\n            method: 'get',\n            success: function success(response) {\n              var _this$setState2;\n\n              var data = [];\n              console.log(response);\n              var finished = 0;\n              var sumDays = 0;\n\n              for (var i in pasos) {\n                data[i] = {\n                  numero: pasos[i].numero,\n                  x: pasos[i].nombre_mostrar,\n                  y: 0\n                };\n              }\n\n              for (var _i in response) {\n                for (var r in data) {\n                  if (data[r].numero == response[_i].numero_paso_actual) {\n                    data[r].y += 1;\n                  }\n                }\n\n                if (response[_i].Status == 2) {\n                  sumDays += moment(response[_i].fecha_ultima_actualizacion).diff(moment(response[_i].fecha_inicio), 'days');\n                  finished += 1;\n                }\n              }\n\n              console.log(sumDays);\n\n              _this.setState((_this$setState2 = {}, _defineProperty(_this$setState2, \"data_\" + key + \"spinner\", false), _defineProperty(_this$setState2, \"data_\" + key + \"xy\", data), _defineProperty(_this$setState2, \"data_\" + key + \"prom\", sumDays / finished), _this$setState2));\n            },\n            error: function error(response) {\n              _this.setState(_defineProperty({}, \"data_\" + key + \"spinner\", false));\n            }\n          });\n        },\n        error: function error(response) {\n          _this.setState(_defineProperty({}, \"data_\" + key + \"spinner\", false));\n        }\n      });\n    };\n\n    _this.state = {\n      tramitesMes: 0,\n      tramitesSemana: 0,\n      loadingMonth: false,\n      loadingWeek: false,\n      tramitesAcademicos: false,\n      salesPieData: [],\n      totalTramites: 0,\n      tramitesTerminados: 0,\n      salesPieData2: [],\n      tramiteTransferencia: false,\n      pasosTransferencia: [],\n      procs: []\n    };\n    return _this;\n  }\n\n  _createClass(DashboardView, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      this.setState({\n        loadingMonth: true\n      });\n      var tramitesMes = 0;\n      var totalTramites = 0;\n      API.restCall({\n        service: 'get_tramite_alumnos_status',\n        method: 'get',\n        success: function success(response) {\n          for (var i in response) {\n            totalTramites += 1;\n\n            if (response[i].status == \"TERMINADO\") {\n              tramitesMes += 1;\n            }\n          }\n\n          _this2.setState({\n            tramitesMes: tramitesMes,\n            totalTramites: totalTramites,\n            loadingMonth: false\n          });\n\n          var tramitesTerminados = 0;\n\n          if (_this2.state.totalTramites != 0) {\n            tramitesTerminados = _this2.state.tramitesMes / _this2.state.totalTramites * 100;\n          }\n\n          _this2.setState({\n            tramitesTerminados: tramitesTerminados\n          });\n        },\n        error: function error(response) {\n          _this2.setState({\n            loadingMonth: false\n          });\n        }\n      });\n      this.setState({\n        tramitesAcademicos: true\n      });\n      API.restCall({\n        service: 'get_tramite_alumnos_status',\n        method: 'get',\n        success: function success(response) {\n          var xy = [{\n            x: 'Baja de materias',\n            y: 0\n          }, {\n            x: 'InterCampus',\n            y: 0\n          }, {\n            x: 'Cambio de carrera',\n            y: 0\n          }, {\n            x: 'Baja temporal',\n            y: 0\n          }, {\n            x: 'Transferencia',\n            y: 0\n          }];\n\n          for (var i in response) {\n            if (response[i].nombre == \"Intercampus\") {\n              xy[1].y += 1;\n            } else if (response[i].nombre == \"Baja de materias\") {\n              xy[0].y += 1;\n            } else if (response[i].nombre == \"Cambio de carrera\") {\n              xy[2].y += 1;\n            } else if (response[i].nombre == \"Baja temporal\") {\n              xy[3].y += 1;\n            } else if (response[i].nombre == \"Transferencia\") {\n              xy[4].y += 1;\n            }\n          }\n\n          _this2.setState({\n            tramitesAcademicos: false,\n            salesPieData: xy\n          });\n        },\n        error: function error(response) {\n          _this2.setState({\n            tramitesAcademicos: false\n          });\n        }\n      });\n      this.setState({\n        loadingWeek: true\n      });\n      var tramitesSemana = 0;\n      API.restCall({\n        service: 'get_tramite_alumnos_status_week',\n        method: 'get',\n        success: function success(response) {\n          for (var i in response) {\n            if (response[i].status == \"TERMINADO\") {\n              tramitesSemana += 1;\n            }\n          }\n\n          _this2.setState({\n            tramitesSemana: tramitesSemana,\n            loadingWeek: false\n          });\n        },\n        error: function error(response) {\n          _this2.setState({\n            loadingWeek: false\n          });\n        }\n      });\n      /*this.setState({tramiteTransferencia: true});\n      API.restCall({\n          service: 'get_tramite_alumnos_transferencia_pasos',\n          method:'get',\n          success:(response) => {\n              let xy = [];\n              for (let i in response) {\n                  xy[i] = response[i].nombre;\n              }\n              this.setState({pasosTransferencia: xy});\n          },\n      });\n      API.restCall({\n          service: 'get_tramite_alumnos_transferencia',\n          method:'get',\n          success:(response) => {\n              let xy = [];\n              for (let i in this.state.pasosTransferencia) {\n                  xy[i] = {x: this.state.pasosTransferencia[i], y: 0};\n              }\n              for (let i in response) {\n                  xy[response[i].paso_actual - 1].y += 1;\n              }\n              this.setState({tramiteTransferencia: false, salesPieData2: xy});\n          },\n          error:(response) => {\n              this.setState({tramiteTransferencia: false});\n          }\n      });*/\n\n      API.restCall({\n        service: 'get_procesos',\n        method: 'get',\n        success: function success(response) {\n          var datos = [];\n          console.log(response);\n\n          for (var i in response) {\n            _this2.getData(i, response[i]);\n          }\n\n          _this2.setState({\n            procesos: datos,\n            procs: response\n          });\n        },\n        error: function error(response) {\n          _this2.setState({\n            tramiteTransferencia: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"graficas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Collapse, {\n        defaultActiveKey: ['1'],\n        onChange: callback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, this.state.procs.map(function (item, key) {\n        return React.createElement(Panel, {\n          header: item.nombre,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this3.getData(key, item);\n          },\n          style: {\n            float: \"right\",\n            width: \"100px\",\n            marginRight: 5\n          },\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, \"Consultar\"), React.createElement(Select, {\n          defaultValue: \"-1\",\n          onChange: function onChange(value) {\n            return _this3.setState(_defineProperty({}, \"data_\" + key + \"status\", value));\n          },\n          style: {\n            float: \"right\",\n            width: \"200px\",\n            marginRight: 5\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, React.createElement(Select.Option, {\n          value: \"-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, \"Todos los status\"), React.createElement(Select.Option, {\n          value: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, \"Iniciado\"), React.createElement(Select.Option, {\n          value: \"1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, \"En Proceso\"), React.createElement(Select.Option, {\n          value: \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, \"Finalizado\")), React.createElement(Select, {\n          defaultValue: \"0\",\n          onChange: function onChange(value) {\n            return _this3.setState(_defineProperty({}, \"data_\" + key + \"month\", value));\n          },\n          style: {\n            float: \"right\",\n            width: \"200px\",\n            marginRight: 5\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(Select.Option, {\n          value: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, \"Todos los meses\"), React.createElement(Select.Option, {\n          value: \"1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, \"Enero\"), React.createElement(Select.Option, {\n          value: \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, \"Febrero\"), React.createElement(Select.Option, {\n          value: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \"Marzo\"), React.createElement(Select.Option, {\n          value: \"4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, \"Abril\"), React.createElement(Select.Option, {\n          value: \"5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, \"Mayo\"), React.createElement(Select.Option, {\n          value: \"6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, \"Junio\"), React.createElement(Select.Option, {\n          value: \"7\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, \"Julio\"), React.createElement(Select.Option, {\n          value: \"8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"Agosto\"), React.createElement(Select.Option, {\n          value: \"9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, \"Septiembre\"), React.createElement(Select.Option, {\n          value: \"10\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, \"Octubre\"), React.createElement(Select.Option, {\n          value: \"11\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }, \"Noviembre\"), React.createElement(Select.Option, {\n          value: \"12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }, \"Diciembre\")), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, item.nombre, \" \"), React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }), \"Duraci\\xF3n promedio en d\\xEDas:\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }), _this3.state[\"data_\" + key + \"prom\"] ? _this3.state[\"data_\" + key + \"prom\"] : \"\"), React.createElement(Pie, {\n          hasLegend: true,\n          title: item.nombre,\n          subTitle: \"Total\",\n          total: function total() {\n            return React.createElement(Spin, {\n              spinning: _this3.state[\"data_\" + key + \"spinner\"],\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 308\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              dangerouslySetInnerHTML: {\n                __html: (_this3.state[\"data_\" + key + \"xy\"] ? _this3.state[\"data_\" + key + \"xy\"] : []).reduce(function (pre, now) {\n                  return now.y + pre;\n                }, 0)\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 309\n              },\n              __self: this\n            }));\n          },\n          data: _this3.state[\"data_\" + key + \"xy\"] ? _this3.state[\"data_\" + key + \"xy\"] : [],\n          valueFormat: function valueFormat(val) {\n            return React.createElement(\"span\", {\n              dangerouslySetInnerHTML: {\n                __html: val\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 317\n              },\n              __self: this\n            });\n          },\n          height: 294,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303\n          },\n          __self: this\n        }));\n      })));\n    }\n  }]);\n\n  return DashboardView;\n}(Component);\n\nexport default DashboardView;","map":{"version":3,"sources":["/mnt/c/Users/oscar/Documents/autoservicio-cartas-back/front-end/src/views/DashboardView.js"],"names":["React","Component","Button","Collapse","Spin","Charts","Pie","moment","API","Select","Panel","callback","key","salesPieData3","x","y","salesPieData4","DashboardView","props","getData","item","setState","restCall","service","id","method","success","response","console","log","pasos","state","undefined","data","finished","sumDays","i","numero","nombre_mostrar","r","numero_paso_actual","Status","fecha_ultima_actualizacion","diff","fecha_inicio","error","tramitesMes","tramitesSemana","loadingMonth","loadingWeek","tramitesAcademicos","salesPieData","totalTramites","tramitesTerminados","salesPieData2","tramiteTransferencia","pasosTransferencia","procs","status","xy","nombre","datos","procesos","map","float","width","marginRight","value","__html","reduce","pre","now","val"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Collapse, Spin } from 'antd';\nimport Charts from 'ant-design-pro/lib/Charts';\nimport { Pie } from 'ant-design-pro/lib/Charts';\nimport moment from 'moment';\nimport '../App.css';\nimport \"antd/dist/antd.css\";\nimport API from \"../tools/API\";\nimport Select from \"antd/lib/select\";\n\nconst Panel = Collapse.Panel;\n\nfunction callback(key) {\n    //console.log(key);\n}\n\n// Transferencia otro campus    QUITAR\nconst salesPieData3 = [\n    {\n        x: 'Director de programa autoriza',\n        y: 100,\n    },\n    {\n        x: 'Escolar origen autoriza',\n        y: 220,\n    },\n    {\n        x: 'Tesorería',\n        y: 40,\n    },\n    {\n        x: 'Escolar destino autoriza',\n        y: 40,\n    },\n    {\n        x: 'Trámite terminado',\n        y: 40,\n    },\n];\n\n// Baja de materias    QUITAR\nconst salesPieData4 = [\n    {\n        x: 'Escolar inicia trámite',\n        y: 40,\n    },\n    {\n        x: 'Becas autoriza',\n        y: 30,\n    },\n    {\n        x: 'DC autoriza',\n        y: 10,\n    },\n    {\n        x: 'Trámite terminado',\n        y: 5,\n    },\n];\n\n\n\nclass DashboardView extends Component {\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            tramitesMes: 0,\n            tramitesSemana: 0,\n            loadingMonth: false,\n            loadingWeek: false,\n            tramitesAcademicos: false,\n            salesPieData:[],\n            totalTramites: 0,\n            tramitesTerminados: 0,\n            salesPieData2: [],\n            tramiteTransferencia: false,\n            pasosTransferencia: [],\n            procs:[]\n        }\n    }\n\n    componentWillMount() {\n        this.setState({loadingMonth: true});\n        let tramitesMes = 0;\n        let totalTramites = 0;\n        API.restCall({\n            service: 'get_tramite_alumnos_status',\n            method:'get',\n            success:(response) => {\n                for (let i in response) {\n                    totalTramites += 1;\n                    if (response[i].status == \"TERMINADO\") {\n                        tramitesMes += 1;\n                    }\n                }\n                this.setState({tramitesMes: tramitesMes, totalTramites: totalTramites, loadingMonth: false});\n                let tramitesTerminados = 0;\n                if (this.state.totalTramites != 0) {\n                    tramitesTerminados = this.state.tramitesMes / this.state.totalTramites * 100;\n                }\n                this.setState({tramitesTerminados: tramitesTerminados});\n            },\n            error:(response) => {\n                this.setState({loadingMonth: false});\n            }\n        });\n        this.setState({tramitesAcademicos: true});\n        API.restCall({\n            service: 'get_tramite_alumnos_status',\n            method:'get',\n            success:(response) => {\n                let xy = [  {\n                    x: 'Baja de materias',\n                    y: 0,\n                },\n                    {\n                        x: 'InterCampus',\n                        y: 0,\n                    },\n                    {\n                        x: 'Cambio de carrera',\n                        y: 0,\n                    },\n                    {\n                        x: 'Baja temporal',\n                        y: 0,\n                    },\n                    {\n                        x: 'Transferencia',\n                        y: 0,\n                    }]\n                for (let i in response) {\n                    if (response[i].nombre == \"Intercampus\") {\n                        xy[1].y += 1;\n                    }\n                    else if (response[i].nombre == \"Baja de materias\") {\n                        xy[0].y += 1;\n                    }\n                    else if (response[i].nombre == \"Cambio de carrera\") {\n                        xy[2].y += 1;\n                    }\n                    else if (response[i].nombre == \"Baja temporal\") {\n                        xy[3].y += 1;\n                    }\n                    else if (response[i].nombre == \"Transferencia\") {\n                        xy[4].y += 1;\n                    }\n                }\n                this.setState({tramitesAcademicos: false, salesPieData:xy});\n            },\n            error:(response) => {\n                this.setState({tramitesAcademicos: false});\n            }\n        });\n        this.setState({loadingWeek: true});\n        let tramitesSemana = 0;\n        API.restCall({\n            service: 'get_tramite_alumnos_status_week',\n            method:'get',\n            success:(response) => {\n                for (let i in response) {\n                    if (response[i].status == \"TERMINADO\") {\n                        tramitesSemana += 1;\n                    }\n                }\n                this.setState({tramitesSemana: tramitesSemana, loadingWeek: false});\n            },\n            error:(response) => {\n                this.setState({loadingWeek: false});\n            }\n        });\n\n        /*this.setState({tramiteTransferencia: true});\n        API.restCall({\n            service: 'get_tramite_alumnos_transferencia_pasos',\n            method:'get',\n            success:(response) => {\n                let xy = [];\n                for (let i in response) {\n                    xy[i] = response[i].nombre;\n                }\n                this.setState({pasosTransferencia: xy});\n            },\n        });\n        API.restCall({\n            service: 'get_tramite_alumnos_transferencia',\n            method:'get',\n            success:(response) => {\n                let xy = [];\n                for (let i in this.state.pasosTransferencia) {\n                    xy[i] = {x: this.state.pasosTransferencia[i], y: 0};\n                }\n                for (let i in response) {\n                    xy[response[i].paso_actual - 1].y += 1;\n                }\n                this.setState({tramiteTransferencia: false, salesPieData2: xy});\n            },\n            error:(response) => {\n                this.setState({tramiteTransferencia: false});\n            }\n        });*/\n        API.restCall({\n            service: 'get_procesos',\n            method:'get',\n            success:(response) => {\n                let datos = [];\n                console.log(response)\n\n                for (let i in response) {\n                    this.getData(i, response[i]);\n                }\n                this.setState({procesos: datos, procs: response});\n            },\n            error:(response) => {\n                this.setState({tramiteTransferencia: false});\n            }\n        });\n    }\n    getData = (key, item) => {\n        this.setState({[\"data_\"+key+\"spinner\"]:true});\n        API.restCall({\n            service: 'get_pasos_proceso/' + item.id,\n            method:'get',\n            success:(response) => {\n                console.log(response);\n                let pasos = response;\n                API.restCall({\n                    service: 'get_tramites_resumen/' + item.id + \"/\" + (this.state[\"data_\"+key+\"month\"] != undefined ?\n                        this.state[\"data_\"+key+\"month\"] : 0) + \"/\" + (this.state[\"data_\"+key+\"status\"] != undefined  ?\n                        this.state[\"data_\"+key+\"status\"] : -1),\n                    method:'get',\n                    success:(response) => {\n                        let data = [];\n                        console.log(response)\n                        let finished = 0;\n                        let sumDays = 0;\n                        for (let i in pasos) {\n                            data[i] = {numero: pasos[i].numero, x: pasos[i].nombre_mostrar, y: 0};\n                        }\n                        for (let i in response) {\n                            for (let r in data){\n                                if (data[r].numero == response[i].numero_paso_actual){\n                                    data[r].y += 1;\n                                }\n                            }\n                            if (response[i].Status == 2){\n                                sumDays += moment(response[i].fecha_ultima_actualizacion).diff(moment(response[i].fecha_inicio),'days');\n                                finished += 1;\n                            }\n                        }\n                        console.log(sumDays);\n                        this.setState({[\"data_\"+key+\"spinner\"]:false, [\"data_\"+key+\"xy\"]:data,  [\"data_\"+key+\"prom\"]: (sumDays / finished)});\n                    },\n                    error:(response) => {\n                        this.setState({[\"data_\"+key+\"spinner\"]:false});\n                    }\n                });\n            },\n            error:(response) => {\n                this.setState({[\"data_\"+key+\"spinner\"]:false});\n            }\n        });\n    };\n    render() {\n\n        return (\n            <div className=\"graficas\">\n\n\n                <Collapse defaultActiveKey={['1']} onChange={callback}>\n\n                    {this.state.procs.map((item, key) => (\n                        <Panel header={item.nombre} key={key}>\n                            <Button onClick={()=>this.getData(key, item)} style={{float:\"right\", width:\"100px\", marginRight:5}} type={\"primary\"}>Consultar</Button>\n\n                            <Select defaultValue=\"-1\" onChange={(value)=> this.setState({[\"data_\"+key+\"status\"]:value})}  style={{float:\"right\", width:\"200px\", marginRight:5}}>\n                                <Select.Option value=\"-1\">Todos los status</Select.Option>\n                                <Select.Option value=\"0\">Iniciado</Select.Option>\n                                <Select.Option value=\"1\">En Proceso</Select.Option>\n                                <Select.Option value=\"2\">Finalizado</Select.Option>\n                            </Select>\n\n                            <Select defaultValue=\"0\"  onChange={(value)=> this.setState({[\"data_\"+key+\"month\"]:value})}   style={{float:\"right\", width:\"200px\", marginRight:5}}>\n                                <Select.Option value=\"0\">Todos los meses</Select.Option>\n                                <Select.Option value=\"1\">Enero</Select.Option>\n                                <Select.Option value=\"2\">Febrero</Select.Option>\n                                <Select.Option value=\"3\">Marzo</Select.Option>\n                                <Select.Option value=\"4\">Abril</Select.Option>\n                                <Select.Option value=\"5\">Mayo</Select.Option>\n                                <Select.Option value=\"6\">Junio</Select.Option>\n                                <Select.Option value=\"7\">Julio</Select.Option>\n                                <Select.Option value=\"8\">Agosto</Select.Option>\n                                <Select.Option value=\"9\">Septiembre</Select.Option>\n                                <Select.Option value=\"10\">Octubre</Select.Option>\n                                <Select.Option value=\"11\">Noviembre</Select.Option>\n                                <Select.Option value=\"12\">Diciembre</Select.Option>\n                            </Select>\n                            <h2>{item.nombre} </h2>\n                            <h4><br/>Duración promedio en días:<br/>{this.state[\"data_\"+key+\"prom\"] ? this.state[\"data_\"+key+\"prom\"] : \"\"}</h4>\n\n                            <Pie\n                                hasLegend\n                                title={item.nombre}\n                                subTitle=\"Total\"\n                                total={() => (\n                                    <Spin spinning={this.state[\"data_\"+key+\"spinner\"]}>\n                                    <span\n                                        dangerouslySetInnerHTML={{\n                                            __html: ((this.state[\"data_\"+key+\"xy\"] ? this.state[\"data_\"+key+\"xy\"]  : []).reduce((pre, now) => now.y + pre, 0))\n                                        }}\n                                    />\n                                    </Spin>\n                                )}\n                                data={this.state[\"data_\"+key+\"xy\"] ? this.state[\"data_\"+key+\"xy\"]  : []}\n                                valueFormat={val => <span dangerouslySetInnerHTML={{ __html: (val) }} />}\n                                height={294}\n                            />\n                        </Panel>)\n                    )}\n\n\n                </Collapse>\n\n\n            </div>\n        );\n    }\n}\n\nexport default DashboardView;"]},"metadata":{},"sourceType":"module"}